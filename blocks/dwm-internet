#!/bin/sh

case $BLOCK_BUTTON in
1) networkmanager_dmenu -l 10;;
3) notify-send "ðŸŒ Internet module" "\- Click to connect
ó°¤­: no wifi connection
ó°¤¥: wifi connection with quality
ó°ˆ‚: no ethernet
ó°ˆ: ethernet working
ó°¤ª: vpn is active
";;
        6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

if grep -xq 'up' /sys/class/net/w*/operstate 2>/dev/null; then
    quality=$(awk '/^\s*w/ { print int($3 * 100 / 70) }' /proc/net/wireless)
    if [ "$quality" -ge 75 ]; then
        wifiicon="ó°¤¨"
    elif [ "$quality" -ge 50 ]; then
        wifiicon="ó°¤¥"
    elif [ "$quality" -ge 25 ]; then
        wifiicon="ó°¤¢"
    else
        wifiicon="ó°¤¯"
    fi
elif grep -xq 'down' /sys/class/net/w*/operstate 2>/dev/null; then
    grep -xq '0x1003' /sys/class/net/w*/flags && wifiicon="ó°¤­" || wifiicon="ó°¤®"
else
  wifiicon="ó°¤£"

fi
printf "%s%s%s" "$wifiicon" "$(sed "s/down/ó°ˆ‚/;s/up/ó°ˆ/" /sys/class/net/e*/operstate 2>/dev/null)" "$(sed "s/.*/ó°¤ª/" /sys/class/net/tun*/operstate 2>/dev/null)"
