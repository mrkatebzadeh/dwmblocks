#!/bin/sh

case $BLOCK_BUTTON in
	3) notify-send "üîã Battery module" "ÔâÇ: discharging
üõë: not charging
‚ôª: stagnant charge
üîå: charging
ÔâÄ: charged
‚ùó: battery very low!
- Scroll to change adjust xbacklight." ;;
	4) xbacklight -inc 10 ;;
	5) xbacklight -dec 10 ;;
	6) "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

batteries=$(ls /sys/class/power_supply/ | grep -i bat)
if [ -z "$batteries" ]; then
  echo Ó¨≠
  exit 1
fi
for kk in "${batteries[@]}"; do
  battery=/sys/class/power_supply/$kk
	[ -n "${capacity+x}" ] && printf " "
	capacity=$(cat "$battery/capacity")
	timeleft=$(acpi -b | awk '{print $5}'| awk -F ":" '{print $1":"$2}')
	case "$(cat "$battery/status" 2>&1)" in
    "Full") 
        status="Û∞ÇÑ" ;;
    "Discharging") 
        case 1 in
            $((capacity >= 95)) ) status="Û∞Åπ" ;;  
            $((capacity >= 70)) ) status="Û∞Åº" ;;  
            $((capacity >= 60)) ) status="Û∞Åº" ;;  
            $((capacity >= 50)) ) status="Û∞Åª" ;;  
            $((capacity >= 40)) ) status="Û∞Å∫" ;;  
            $((capacity >= 30)) ) status="Û∞Å∫" ;;  
            $((capacity >= 20)) ) status="Û∞Å∫" ;;  
            $((capacity >= 10)) ) status="Û∞Å∫" ;;  
            * ) 
                status="Û∞Åµ"  
                notify-send "Low battery" "$(acpi -b)"
                ;;
        esac;;
    "Charging") 
        case 1 in
            $((capacity >= 95)) ) status="Û∞ÇÖ" ;; 
            $((capacity >= 90)) ) status="Û∞ÇÜ" ;; 
            $((capacity >= 80)) ) status="Û∞ÇÑ" ;; 
            $((capacity >= 60)) ) status="Û∞ÇÑ" ;; 
            $((capacity >= 40)) ) status="Û∞ÇÉ" ;; 
            $((capacity >= 30)) ) status="Û∞ÇÇ" ;; 
            $((capacity >= 20)) ) status="Û∞ÇÅ" ;; 
            * ) status="Û∞ÇÄ" ;;  
        esac ;;
    "Not charging") 
        status="Û∞Åí" ;;  
    "Unknown") 
        status="Û∞Çè" ;;  
    *) 
        exit 1 ;;
esac


	printf "%s %d%%" "$status" "$capacity"; unset warn
done && exit 0
